/*!
 * winbows-devtool v1.0.0
 * Copyright (c) Siyu1017 2025
 * Github : Siyu1017/winbows-devtool
 */
function e(e){try{return e instanceof HTMLElement}catch(t){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}function t(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function n(e){return"number"==typeof e&&isFinite(e)}function o(e){if(n(e))return e;const o=(l=e?.valueOf,"function"==typeof l?e.valueOf():e);var l;return+(e=t(o)?o+"":o)}function l(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function s(e){let t=null;return function(...n){t||(t=setTimeout(()=>{t=null,e.apply(this,n)},16))}}const a="…",i="ƒ";function r(e){const n=d(e);return!!["map","set","file","blob"].includes(n)||(Array.isArray(e)?e.length>0:!!t(e)&&Object.keys(e).length>0)}function c(e){return"string"!=typeof e&&(e=String(e)),l(e)}function d(e){const t=typeof e;return null===e?"null":"string"===t?"string":"boolean"===t?"boolean":"number"===t?"number":"undefined"===t?"undefined":"symbol"===t?"symbol":"function"===t?"function":Array.isArray(e)?"array":"[object Object]"==={}.toString.call(e)?"object":"object"===t?{}.toString.call(e).slice(8,-1).toLowerCase():void 0}function p(e,t){return`<span class="obj-viewer-value-preview obj-viewer-value-${t}">${e}</span>`}function u(t,o=0){const l=new WeakSet;return function t(n,o){const s=d(n),r=0==o;let u="";if("object"==s){if(l.has(n))return"[Circular]";l.add(n)}if(o>2)return a;if("array"==s){const e=n.length;if(r){let l=n.slice(0,100).map(e=>t(e,o+1)).join(", ");e>100&&(l+=", "+a),u=p(`${e>1?`<span class="obj-viewer-value-desc">(${c(e)})</span>`:""} [${l}]`,"array")}else u=p(`Array(${c(e)})`,"array")}else if("object"==s)if(r){const e=Object.keys(n);let l=e.slice(0,5).map(e=>{const l=n[e];return`${s=e,`<span class="obj-viewer-key-preview obj-viewer-key">${c(s)}</span>`}: ${p(t(l,o+1),d(l))}`;var s}).join(", ");e.length>5&&(l+=", "+a),u=p(`{${l}}`,"object")}else u=p(`{${a}}`,"object");else if("string"==s)u=p(`'${c(n)}'`,"string");else if("function"==s)if(r){const e=function(e){try{return Function.prototype.toString.call(e)}catch(e){}try{return e+""}catch(e){}}(n),t=n.constructor?.toString().toLowerCase()||"",o=!n.prototype&&!/^(?:async\s+)?function/.test(e),l=t.includes("async"),s=t.includes("generator");(e||"").trim().startsWith("class")?u=p(`<span style="color: #ff8b1c;">class</span> ${c(n.prototype?.constructor?.name)}`,"function"):o?u=p((l?'<span style="color: #ff8b1c;">async</span>':"")+" () => {}","function"):(u+=l?'<span style="color: #ff8b1c;">async</span>':"",u+=`<span style="color: #ff8b1c;">${l?" ":""}${i}</span>`,u+=s?'<span style="color: #ff8b1c;">*</span>':"",u+=` ${n.name&&e.match(/function([\s\S]*?)\(.*?\)/)?.[1]?.replace("*","").trim()?c(n.name):""}()`,u=p(u,"function"))}else u=p(i,"function");else if(e(n)){const e=n.id,t=[...n.classList],o=(t.length>0?".":"")+t.join(".");u=p(`<span style="color: #659fff;">${c(n.tagName.toLowerCase())}</span><span style="color: #ff8f26;">${c(e?"#"+e:"")}</span><span style="color: #a6d2ff;">${c(o)}</span>`,"generic")}else if("map"==s)if(r){const e=[...n.keys()];let l=e.slice(0,5).map(e=>{const l=n.get(e);return`${p(`'${c(e)}'`,"string")} => ${t(l,o+1)}`}).join(", ");e.length>5&&(l+=", "+a),u=p(`<span class="obj-viewer-value-desc">Map(${c(n.size)})</span> {${l}}`,"map")}else u=p(`Map(${c(n.size)})`,"map");else if("set"==s)if(r){const e=[...n.keys()];let l=e.slice(0,5).map(e=>`${t(e,o+1)}`).join(", ");e.length>5&&(l+=", "+a),u=p(`<span class="obj-viewer-value-desc">Set(${c(n.size)})</span> {${l}}`,"set")}else u=p(`Set(${c(n.size)})`,"set");else u="error"==s?p("Error: "+c(n.message),"error"):["number","boolean","null","undefined","symbol","date","regexp"].includes(s)?p(c(n),s):p(c((h=s,String(h).charAt(0).toUpperCase()+String(h).slice(1))),s);var h;return u}(t,o=n(o)?o:0)}function h({key:e,value:t,preview:n,separator:o,nextFn:l,type:s,expandable:a}){const i=document.createElement("div"),r=document.createElement("div"),c=document.createElement("div"),d=document.createElement("div"),p=document.createElement("div"),u=document.createTextNode((o||":")+" "),h=document.createElement("div");if(i.className="obj-viewer-item",r.className="obj-viewer-line",c.className="obj-viewer-next",d.className="obj-viewer-expand",i.appendChild(r),r.appendChild(d),r.setAttribute("data-expandable",1==a),i.appendChild(c),1==a){let e=!1;r.setAttribute("data-expand",e),r.addEventListener("click",()=>{e=!e,r.setAttribute("data-expand",e),c.innerHTML="",l(t,c)})}return e&&"string"==typeof e&&(p.className="obj-viewer-key",p.textContent=e,r.appendChild(p),r.appendChild(u)),h.className="obj-viewer-value "+(s?"obj-viewer-value-"+s:""),h.innerHTML=n,r.appendChild(h),{item:i,line:r,next:c,key:p,preview:h}}const m=Symbol("triggerEvent"),g=Symbol("listeners");class v{constructor(e,n={shallow:!1}){var o;this.options=t(n)?n:{shallow:!1},this.container=document.createElement("div"),this.overview=document.createElement("div"),this.overviewExpand=document.createElement("div"),this.overviewContent=document.createElement("div"),this.content=document.createElement("div"),this.container.className="obj-viewer-container",this.overview.className="obj-viewer-overview",this.overviewExpand.className="obj-viewer-expand",this.overviewContent.className="obj-viewer-overview-content",this.content.className="obj-viewer-content",this.container.appendChild(this.overview),this.container.appendChild(this.content),this.overview.appendChild(this.overviewExpand),this.overview.appendChild(this.overviewContent),o=this.overview,r(e)?o.setAttribute("data-expandable",!0):o.setAttribute("data-expandable",!1);var l=!1;if(r(e))return this.overviewContent.innerHTML=this.getPreview(e,this.options.shallow?1:0),this.overview.addEventListener("click",()=>{l=!l,this.overview.setAttribute("data-expand",l),this.content.innerHTML="",this.getLevel(e,this.content)}),this[m]=(e,t)=>{this[g][e]&&this[g][e].forEach(e=>{e(t)})},this[g]={},this;this.container.innerHTML=this.getPreview(e,this.options.shallow?1:0)}on(e,t){this[g][e]||(this[g][e]=[]),this[g][e].push(t)}getLevel(e,t,n={levels:[],type:"generic",start:0,parentVLevels:void 0}){const o=d(e);if("array"==o)return function(e,t,n){return function e(t,o,l=0,s=0){const i=t.length,c=s||0;if(i>100||l>1&&100==i){const s=l?l-1:~~(Math.log10(i-1)/2),p=Math.pow(100,s),m=i/p;for(let l=0;l<m;l++){let m=t.slice(l*p,(l+1)*p),g=[c+l*p,c+(l+1)*p-1];g[1]>i-1&&0==c&&(g[1]=i-1),g[0]==g[1]&&(m=m[0]);const{item:v}=h(g[0]==g[1]?{key:String(g[0]),value:m,preview:u(m),nextFn:n,type:d(m),expandable:r(m)}:{value:m,preview:`[${g[0]} ${a} ${g[1]}]`,nextFn:(t,n)=>{e(m,n,s,g[0])},type:"array",expandable:!0});o.appendChild(v)}}else for(let e=0;e<i;e++){const l=t[e],{item:s}=h({key:String(c?c+e:e),value:l,preview:u(l),nextFn:n,type:d(l),expandable:r(l)});o.appendChild(s)}}(e,t)}(e,t,this.getLevel.bind(this));if("object"==o){const n=Object.keys(e).sort(),o=Object.getOwnPropertyNames(e).filter(e=>!n.includes(e)).sort();n.forEach(n=>{const o=e[n],{item:l}=h({key:n,value:o,preview:u(o),nextFn:this.getLevel.bind(this),type:d(o),expandable:r(o)});t.appendChild(l)}),o.forEach(n=>{const o=e[n],{item:l,key:s}=h({key:n,value:o,preview:u(o),nextFn:this.getLevel.bind(this),type:d(o),expandable:r(o)});t.appendChild(l),s.style.opacity=".6"})}else if("map"==o)e.keys().forEach((n,o)=>{const l=e.get(n),{item:s}=h({key:String(o),value:{key:n,value:l},preview:`{'${c(n)}' => ${this.getPreview(l,1)}}`,nextFn:this.getLevel.bind(this),type:"styleless",expandable:!0});t.appendChild(s)});else if("set"==o)e.keys().forEach((e,n)=>{const{item:o}=h({key:String(n),value:{value:e},preview:this.getPreview(e,1),nextFn:this.getLevel.bind(this),type:"styleless",expandable:!0});t.appendChild(o)});else if("file"==o){["lastModified","lastModifiedDate","name","size","type","webkitRelativePath"].forEach(n=>{const o=e[n],{item:l}=h({key:n,value:o,preview:this.getPreview(o),nextFn:this.getLevel.bind(this),type:d(o),expandable:!1});t.appendChild(l)})}else if("blob"==o){["size","type"].forEach(n=>{const o=e[n],{item:l}=h({key:n,value:o,preview:this.getPreview(o),nextFn:this.getLevel.bind(this),type:d(o),expandable:!1});t.appendChild(l)})}}getPreview=u}v.utils={isJSON:function(e){let t="string"!=typeof e?JSON.stringify(e):e;try{t=JSON.parse(t)}catch(e){return!1}return"object"==typeof t&&null!==t},isObject:t,isElement:e,isFinite:isFinite,isNaN:isNaN,getType:d,getClassName:function(e){switch(typeof e){case"string":return"obj-viewer-value-string";case"number":return"obj-viewer-value-number";case"boolean":return"obj-viewer-value-symbol";case"object":return null===e?"obj-viewer-value-empty":(Array.isArray(e),"obj-viewer-value-generic");case"undefined":return"obj-viewer-value-empty";default:return"obj-viewer-value-generic"}},expandable:r,parseJSON:function(e){const n=new WeakSet;return function e(o){if(t(o)){if(n.has(o))return"[Circular]";n.add(o)}if("string"==typeof o)try{o=JSON.parse(o)}catch(e){return""}if(Array.isArray(o))return o.map(t=>e(t));if(t(o)){const t={};return Object.keys(o).forEach(n=>{t[n]=e(o[n])}),t}return o}(e)},getPreview:u};var f={logContainer:"log-module_logContainer__RTRoP",noSep:"log-module_noSep__kpXQI",pt0:"log-module_pt0__gmfNw",pt5:"log-module_pt5__0Nnes",logIndent:"log-module_logIndent__hkxtj",logLevelIndent:"log-module_logLevelIndent__fcg-q",logItem:"log-module_logItem__nEqRs",warn:"log-module_warn__XWTVJ",error:"log-module_error__bESfD",info:"log-module_info__GH1qz",logIconContainer:"log-module_logIconContainer__3AkON",logIcon:"log-module_logIcon__gF-Ax",logCountContainer:"log-module_logCountContainer__2csmc",logCount:"log-module_logCount__N-mMq",logContent:"log-module_logContent__emWWb",logPlaintext:"log-module_logPlaintext__BA4Xk",logStyled:"log-module_logStyled__ebxwy",logClear:"log-module_logClear__v-Zvg",collapsibleContainer:"log-module_collapsibleContainer__-Df9-",collapsibleSummaryContainer:"log-module_collapsibleSummaryContainer__88ugq",collapsibleSummaryIconContainer:"log-module_collapsibleSummaryIconContainer__SuhjM",collapsibleSummaryIcon:"log-module_collapsibleSummaryIcon__drjo9",collapsed:"log-module_collapsed__FjxOv",collapsibleSummary:"log-module_collapsibleSummary__xbyOi",collapsibleContentContainer:"log-module_collapsibleContentContainer__z-1W3",collapsibleContent:"log-module_collapsibleContent__sKUKu",tableContainer:"log-module_tableContainer__vh3ut",table:"log-module_table__LCElu",tableHeader:"log-module_tableHeader__wL3Wr",tableBody:"log-module_tableBody__uGV9y",tableHeaderCell:"log-module_tableHeaderCell__eBa-G",tableHeaderCellCaret:"log-module_tableHeaderCellCaret__aubAp",up:"log-module_up__AW6is",tableCell:"log-module_tableCell__5KzwY",tableRow:"log-module_tableRow__LYjh-"};const b=/(?:blob:.+?\/[a-f0-9A-F\-]+|https?:\/\/([a-zA-Z0-9\-\.]+|localhost)(:\d+)?\/[a-zA-Z0-9?&#=.%_\-~/]*)/g;function y(e){return"string"!=typeof e&&(e=String(e)),l(e)}function C(e,t){const n=function(e){const t=[...e],n=t.shift();let l=[];if("string"==typeof n){const e=n.length,s={type:"plaintext",value:[]};let a="",i=null;for(let l=0;l<e;l++){const r=n[l];if("%"==r&&l+1<e){const e=n[++l],r=null!=i?i.value:s.value;if(0==t.length||!"sdifoOcj".includes(e)){a+="%",a+="%"!=e?e:"";continue}a&&(r.push({type:"auto",value:a}),a="");const c=t.shift();switch(e){case"s":r.push({type:"string",value:String(c)});break;case"d":case"i":r.push({type:"number",value:parseInt(c)});break;case"f":r.push({type:"number",value:o(c)});break;case"o":r.push({type:"object",options:{shallow:!0},value:c});break;case"O":r.push({type:"object",value:c});break;case"c":i&&s.value.push(i),i={type:"styled",value:[],style:c};break;case"j":r.push({type:"object",value:v.utils.parseJSON(c)})}}else a+=r}a&&(i?i.value:s.value).push({type:"auto",value:a}),i&&s.value.push(i),l.push(s)}else t.unshift(n);for(;t.length>0;)l.push({type:"auto",value:t.shift()});return l}(t),l=n[0],s="plaintext"==l.type||"string"==typeof l.value;!function t(n,o,l=0){const a=0==l;for(const i in n){const r=n[i];let c=document.createElement("span");if(a&&"plaintext"==r.type&&0==i)c.className=f.logPlaintext,t(r.value,c,l+1);else if(a||"styled"!=r.type)if(v.utils.expandable(r.value))c=new v(r.value,{shallow:r.options?.shallow||!1}).container;else if(a){const t=v.utils.getType(r.value);s&&"string"==t&&"object"!=r.type?c.innerHTML=(e.childElementCount>0?" ":"")+y(r.value):(c.className="string"!=t?`obj-viewer-value-${t}`:"",c.innerHTML=(e.childElementCount>0?" ":"")+v.utils.getPreview(r.value))}else c.textContent=String(r.value);else c.style.cssText=r.style,c.className=f.logStyled,t(r.value,c,l+1);o.appendChild(c)}}(n,e,0)}function w(e=!0){const t=[],n=document.createElement("div"),o=document.createElement("div"),l=document.createElement("div"),s=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div");function c(t){(e=1==t)?n.classList.add(f.collapsed):n.classList.remove(f.collapsed),p(e)}function d(){(e=1!=e)?n.classList.add(f.collapsed):n.classList.remove(f.collapsed),p(e)}function p(e){t.forEach(t=>t(e))}return n.className=f.collapsibleContainer,o.className=f.collapsibleSummaryContainer,l.className=f.collapsibleSummaryIconContainer,s.className=f.collapsibleSummaryIcon,a.className=f.collapsibleSummary,i.className=f.collapsibleContentContainer,r.className=f.collapsibleContent,n.appendChild(o),o.appendChild(l),l.appendChild(s),o.appendChild(a),n.appendChild(i),i.appendChild(r),o.addEventListener("click",d),c(e),{get isCollapsed(){return e},container:n,summary:a,content:r,setCollapsed:c,toggle:d,onChange:function(e){t.push(e)}}}const _=Symbol("listeners"),E=Symbol("emit");class S{constructor(e="log",t){this[_]={},this[E]=(e,t)=>{if(this[_][e])for(const n of this[_][e])n(t)},this.on=(e,t)=>{this[_][e]||(this[_][e]=[]),this[_][e].push(t)},this.type=e,this.args=t,this.noSep=["info","warn","error"].includes(this.type),this.count=1,this.groupStack=[],this.container=document.createElement("div"),this.logIndent=document.createElement("div"),this.logItem=document.createElement("div"),this.logIconContainer=document.createElement("div"),this.logIcon=document.createElement("div"),this.logContent=document.createElement("div"),this.container.className=f.logContainer,this.logIndent.className=f.logIndent,this.logItem.classList.add(f.logItem),this.logIconContainer.className=f.logIconContainer,this.logIcon.className=f.logIcon,this.logContent.className=f.logContent,"log"!=this.type&&this.logItem.classList.add(f[this.type]),this.noSep&&(this.container.classList.add(f.noSep),this.logIcon.classList.add(f[this.type])),this.container.appendChild(this.logIndent),this.container.appendChild(this.logItem),this.logItem.appendChild(this.logIconContainer),this.logIconContainer.appendChild(this.logIcon),this.logItem.appendChild(this.logContent),this.isSimple=!0;for(const e of this.args)v.utils.expandable(e)&&(this.isSimple=!1);switch(this.observer=new ResizeObserver(()=>{this.updateSize(),this[E]("resize")}),this.observer.observe(this.logContent),this.width=0,this.height=0,this.onChange=()=>{},this.updateSize=s(()=>{if(this.measureEl){const e=this.container.cloneNode(!0);this.measureEl.appendChild(e);const{width:t,height:n}=e.getBoundingClientRect();this.width!=t&&(this.width=t),this.height!=n&&(this.height=n),e.remove()}}),this.type){case"log":case"info":case"debug":C(this.logContent,t);break;case"warn":case"error":case"trace":{const{summary:e,content:n,container:o}=w();C(e,t);const l=document.createElement("div");(function(){var e;try{throw new Error("")}catch(t){e=t.stack||""}return(e=e.split("\n").map(function(e){return e.trim()})).splice("Error"==e[0]?2:1)})().forEach(e=>{const t=document.createElement("div");t.innerHTML="string"==typeof e?function(e=""){return e.replaceAll("<","&lt;").replaceAll(">","&gt;")}(e).replace(b,e=>`<a href="${e}" target="_blank">${e}</a>`):"",l.appendChild(t)}),n.appendChild(l),this.logContent.appendChild(o);break}case"clear":const e=document.createElement("div");e.className=f.logClear,e.textContent="Console was cleared.",this.logContent.appendChild(e);break;case"group":case"groupCollapsed":{const{summary:e,container:n,onChange:o,isCollapsed:l,setCollapsed:s}=w("group"!=this.type);C(e,t),e.style.fontWeight="bold",this.logContent.appendChild(n),this.onChange=o,this.isCollapsed=l,this.setCollapsed=s;break}case"table":!function(e,t){const n=t[0],o=v.utils.getType(t[0]);let l=[],s=new Set;if("array"==o)n.forEach((e,t)=>{let n={"(index)":t,...e};Object.keys(n).forEach(e=>s.add(e)),l.push(n)});else{if("object"!=o)return C(e,t);Object.entries(n).forEach(([e,t])=>{let n={"(index)":e,...t};Object.keys(n).forEach(e=>s.add(e)),l.push(n)})}let a=t[1];a&&Array.isArray(a)&&(s=s.intersection(new Set(["(index)",...a])));const i=document.createElement("div"),r=document.createElement("table"),c=document.createElement("colgroup"),d=document.createElement("thead"),p=document.createElement("tr"),u=document.createElement("tbody");i.className=f.tableContainer,r.className=f.table,c.className=f.tableColgroup,d.className=f.tableHeader,p.className=f.tableHeaderRow,u.className=f.tableBody,e.appendChild(i),i.appendChild(r),r.appendChild(c),r.appendChild(d),d.appendChild(p),r.appendChild(u),s.forEach((e,t)=>{const n=document.createElement("th");n.className=f.tableHeaderCell,n.textContent=e,p.appendChild(n)}),l.forEach((e,t)=>{const n=document.createElement("tr");n.className=f.tableRow,u.appendChild(n),s.forEach(o=>{const l=document.createElement("td");l.className=f.tableCell,"(index)"==o?l.textContent=t:Object.prototype.hasOwnProperty.call(e,o)?l.innerHTML=v.utils.getPreview(e[o],1):l.textContent="",n.appendChild(l)})}),C(e,[n]),(()=>{const e=Array.from(u.rows),t=d.rows[0].cells,n=document.createElement("span");n.className=f.tableHeaderCellCaret;for(const o of t){const t=o.cellIndex;let l=0;o.addEventListener("click",()=>{n.remove(),1==l?n.classList.add(f.up):n.classList.remove(f.up),o.appendChild(n),e.sort((e,n)=>{const o=e.cells[t].textContent,s=n.cells[t].textContent;return 0==l?o.localeCompare(s):s.localeCompare(o)}),u.append(...e),l=0==l?1:0})}})()}(this.logContent,t)}}addCount(){this.logCount&&this.logCountContainer||(this.logCountContainer=document.createElement("div"),this.logCount=document.createElement("div"),this.logCountContainer.className=f.logCountContainer,this.logCount.className=f.logCount,this.logIconContainer.remove(),this.logItem.insertAdjacentElement("afterbegin",this.logCountContainer),this.logCountContainer.appendChild(this.logCount)),this.count++,this.logCount.textContent=this.count}setGroupStack(e){this.groupStack=Array.from(e);for(let e=0;e<this.groupStack.length;e++){const e=document.createElement("div");e.className=f.logLevelIndent,this.logIndent.appendChild(e)}}getGroupID(){return this.groupStack[this.groupStack.length-1]||"root"}setMeasureEl(e){this.measureEl=e,this.updateSize()}setLastLog(e){null==e||0==e.noSep&&1==this.noSep?this.container.classList.add(f.pt0):0==e.noSep&&0==this.noSep&&this.container.classList.add(f.pt5)}text(){return this.logContent.textContent||""}}var x="devtool-module_devtool__40Bsh",j="devtool-module_devtoolLogsArea__PZMBh",L="devtool-module_devtoolMeasurementArea__CDPbA",N="devtool-module_devtoolLogs__BDFhB";class k{constructor(){let e;this.devtool=document.createElement("div"),this.devtoolLogsArea=document.createElement("div"),this.devtoolMeasurementArea=document.createElement("div"),this.devtoolLogs=document.createElement("div"),this.devtool.className=x,this.devtoolLogsArea.className=j,this.devtoolMeasurementArea.className=L,this.devtoolLogs.className=N,this.devtool.appendChild(this.devtoolLogsArea),this.devtoolLogsArea.appendChild(this.devtoolMeasurementArea),this.devtoolLogsArea.appendChild(this.devtoolLogs);let t=[],n=[],o=new Set,l=new Map,a={};const i=new Map,r=new Map,c=s((e=800,n=800)=>{const l=this.devtool.clientHeight,s=this.devtool.scrollTop,a=Math.max(0,s-e),i=s+l+n;let r=0,c=-1,d=0,p=0,u=t.filter(e=>!o.has(e.getGroupID()));for(let e=0;e<u.length;e++){const t=r;r+=u[e].height,r>=a&&t<=i&&(-1==c&&(c=e,p=t),d=e)}const h=this.devtool.scrollHeight-this.devtool.clientHeight<this.scrollTop+1;this.devtoolLogsArea.style.height=r+"px",this.devtoolLogs.style.top=p+"px";const m=this.devtoolLogs,g=u.slice(c,d+1).map(e=>e.container);return h&&(this.devtool.scrollTop=99999999),function(e,t){const n=t,o=Array.from(e.children),l=new Map;for(let e=0;e<o.length;e++)l.set(o[e],e);const s=new Array(n.length);for(let e=0;e<n.length;e++){const t=l.has(n[e])?l.get(n[e]):-1;s[e]=t}const a=[],i=new Array(n.length);for(let e=0;e<n.length;e++){const t=s[e];if(-1===t)continue;let n=0,o=a.length;for(;n<o;){const e=n+o>>1;s[a[e]]<t?n=e+1:o=e}n>=a.length?a.push(e):a[n]=e,i[e]=n>0?a[n-1]:-1}let r=new Set(a),c=null;for(let t=n.length-1;t>=0;t--){const o=n[t];-1===s[t]?e.insertBefore(o,c):r.has(t)||e.insertBefore(o,c),c=o}for(const e of o)n.includes(e)||e.remove()}(m,g)}),d=s=>{if(e&&e.type==s.type&&!["group","groupCollapsed","groupEnd"].includes(s.type)&&s.isSimple&&s.text()==e.text())e.addCount();else{if(t.push(s),s.setLastLog(e),s.setMeasureEl(this.devtoolMeasurementArea),s.on("resize",c),s.setGroupStack(n),"group"==s.type||"groupCollapsed"==s.type){const e=function(e,t){var n="",o=(t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").length;for(let l=0;l<e;l++)n+=t.charAt(Math.floor(Math.random()*o));return n}(12),t={id:e,collapsed:"groupCollapsed"==s.type,update:n=>{t.collapsed=n;let s=n;return[e].concat(Array.from(l.get(e))).forEach(e=>{1==s||1==a[e].collapsed?(o.add(e),s=!0):o.delete(e)}),c()}};for(const t of n)l.get(t).add(e);n.push(e),l.set(e,new Set),a[e]=t,s.onChange(t.update);let i=!1;n.forEach(e=>{1==a[e].collapsed||1==i?(o.add(e),i=!0):o.delete(e)})}e=s}c()};let p=0,u=0;this.devtool.onscroll=()=>{const e=this.devtool.scrollTop,t=performance.now(),n=t-u;let o=100*(Math.abs(e-p)/n),l=0,s=0;n>500&&(o=800),o>2e3&&(o=2e3),o<100&&(o=100),e<p?(l=o,s=100):(l=100,s=o),p=e,u=t,c(l,s)},this.console={log:(...e)=>{0!=e.length&&d(new S("log",e))},info:(...e)=>{0!=e.length&&d(new S("info",e))},debug:(...e)=>{0!=e.length&&d(new S("debug",e))},warn:(...e)=>{0!=e.length&&d(new S("warn",e))},error:(...e)=>{0!=e.length&&d(new S("error",e))},group:(...e)=>{e[0]||(e[0]="console.group"),d(new S("group",e))},groupCollapsed:(...e)=>{e[0]||(e[0]="console.groupCollapsed"),d(new S("groupCollapsed",e))},groupEnd:()=>{n.pop(),e={type:"groupEnd"}},count:(e="default")=>{e=String(e);const t=(r.get(e)||0)+1;r.set(e,t),d(new S("log",[`${e}: ${t}`]))},countReset:(e="default")=>{if(e=String(e),!r.has(e))return d(new S("warn",[`Count for '${e}' does not exist`]));r.set(e,0)},time:(e="default")=>{if(e=String(e),i.has(e))return d(new S("warn",[`Timer '${e}' already exists`]));i.set(e,performance.now())},timeLog:(e="default",...t)=>{if(e=String(e),!i.has(e))return d(new S("warn",[`Timer '${e}' does not exist`]));const n=performance.now()-i.get(e);d(new S("log",[`${e}: ${n}ms`].concat(t)))},timeEnd:(e="default")=>{if(e=String(e),!i.has(e))return d(new S("warn",[`Timer '${e}' does not exist`]));const t=performance.now()-i.get(e);d(new S("log",[`${e}: ${t}ms`])),i.delete(e)},table:(...e)=>{e[0]&&d(new S("table",e))},trace:(...e)=>{e[0]||(e[0]="console.trace"),d(new S("trace",e))},assert:(e,...t)=>{e||d(new S("error",["Assertion failed:",...t]))},clear:()=>{t=[],e=null,n=[],o=new Set,l=new Map,a={},d(new S("clear",["Console was cleared"])),c()}}}}export{k as default};
